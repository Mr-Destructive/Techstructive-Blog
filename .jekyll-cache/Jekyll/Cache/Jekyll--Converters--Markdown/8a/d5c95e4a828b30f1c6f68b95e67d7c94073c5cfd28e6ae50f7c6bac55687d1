I"aL<h2 id="introduction">Introduction</h2>

<p>If you have been writing articles you know the pain to get some attention, if you have already been cross-posting your articles it usually takes some time to do that. This task can be automated with a shellscript. If you have been cross-posting articles on <code class="language-plaintext highlighter-rouge">medium.com</code>, <code class="language-plaintext highlighter-rouge">dev.to</code> and at <code class="language-plaintext highlighter-rouge">hashnode.com</code>, then I have a treat for you.</p>

<p>Introducing <strong>crossposter.sh</strong>!!</p>

<h2 id="what-is-crosspostersh">What is Crossposter.sh?</h2>

<h3 id="crosspost-to-devtohahsnodemedium-from-the-command-line">Crosspost to dev.to/hahsnode/medium from the command line.</h3>

<p>Crossposter.sh is a shellscript(BASH) to automate crossposting to platforms like dev.to, medium.com and hashnode.com. The script takes in markdown version of your post with a few inputs from you and posts it to those platforms. You would require a token/key for each of those platforms to post it from the command line. You can check out the official repository of <a href="https://github.com/Mr-Destructive/crossposter">Crossposter</a>.</p>

<p>The actual script is still not perfect (has a few bugs). Though it posts on <code class="language-plaintext highlighter-rouge">dev.to</code> and <code class="language-plaintext highlighter-rouge">medium.com</code> easily, the <code class="language-plaintext highlighter-rouge">hashnode.com</code> is buggy as it parses the raw markdown into the post and doesn’t render as desired. So, <strong>its a under-development script</strong>, fell free to raise any issues or PRs on the official GitHub repo.</p>

<p>Run the script on a bash interpreter with the command:</p>

<p><code class="language-plaintext highlighter-rouge">bash crosspost.sh</code></p>

<p>For posting the article you need to provide the following details:</p>

<h2 id="front-matter">Front-Matter</h2>

<h3 id="meta-data-about-the-post">Meta data about the post</h3>

<ul>
  <li>Title of Post</li>
  <li>Subtitle of Post</li>
  <li>Publish status of post(<code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>)</li>
  <li>Tags for the post (comma separated values)</li>
  <li>Canonical Url (original url of the post)</li>
  <li>Cover Image (URL of the post’s image/thumbnail)</li>
</ul>

<p>This information is a must for <code class="language-plaintext highlighter-rouge">dev.to</code> especially the <code class="language-plaintext highlighter-rouge">title</code>. This should be provide in the same order as given below:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">The title of the post</span>
<span class="na">subtitle</span><span class="pi">:</span> <span class="s">The description of your article</span>
<span class="na">published</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">tags</span><span class="pi">:</span> <span class="s">programming, anythingelse</span>
<span class="na">canonical url</span><span class="pi">:</span> <span class="s">url of your original blog</span>
<span class="na">cover_image</span><span class="pi">:</span> <span class="s">coverimage_url</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>There is no need to enclose any of them with quotation marks. <code class="language-plaintext highlighter-rouge">Published</code> argument will be <code class="language-plaintext highlighter-rouge">true</code> if you want to publish it and <code class="language-plaintext highlighter-rouge">false</code> if you want to keep it in your Drafts.</p>

<p>In the demonstrations, we just need to enter the tokens once. The tokens will be stored locally in the <code class="language-plaintext highlighter-rouge">keys.txt</code> file and retrieved later within the script.</p>

<h2 id="posting-on-devto">Posting on <strong>dev.to</strong>:</h2>

<p>Posting on dev.to requires their <code class="language-plaintext highlighter-rouge">API key</code> which can be generated by going on the <a href="https://dev.to/settings/account/">Dev Community API Keys</a>. From there you can generate a new key with any name you like. You just need to enter the key to CLI once or manually enter in the <code class="language-plaintext highlighter-rouge">keys.txt</code> file with the format <code class="language-plaintext highlighter-rouge">dev.to:key</code> on the first line. This will be used for the future cross-posting whenever you execute the shell script(<code class="language-plaintext highlighter-rouge">bash crosspost.sh</code>)</p>

<p>You can provide the <a href="#front-matter">front matter</a> manually in your markdown file or you will be prompted for the input. So, that is all you will require for posting on dev.to from the Command line.</p>

<p>Lets see the script in action</p>

<p><img src="https://gitlab.com/MR_DESTRUCTIVE/tblog-img/-/raw/main/devto.gif" alt="dev.to" /></p>

<p>If you want to add in more stuff to the post, you can check out the <a href="https://developers.forem.com/api#operation/createArticle">DEV.to API docs</a> which is powered by <a href="https://www.forem.com/">Forem</a>, there a ton of options you can hook to the front-matter in the shellscript.</p>

<p><strong>NOTE: There is a limit of 10 requests per 30 seconds, so keep in mind while testing the script and don’t try to spam</strong></p>

<h2 id="posting-on-hashnodecom">Posting on <strong>hashnode.com</strong>:</h2>

<p>This part is still under development as it only displays the raw markdown in the post, also the <code class="language-plaintext highlighter-rouge">tags</code> are too heavy to implement from the API as <code class="language-plaintext highlighter-rouge">id</code> of every tag is required along with the <code class="language-plaintext highlighter-rouge">slug</code> and <code class="language-plaintext highlighter-rouge">name</code>. Still it serves some purpose at least. For posting on <code class="language-plaintext highlighter-rouge">hashnode.com</code>, we need <code class="language-plaintext highlighter-rouge">Personal Access Token</code>. This can be generated by going to <a href="https://hashnode.com/settings/developer">Developer Settings</a>. You will also require the user-id of your <code class="language-plaintext highlighter-rouge">hashnode</code> account. You can get your user-id/username from the <a href="https://hashnode.com/settings">settings</a> tab under profile information. We require Username for posting to the Publication Blog if any. As usual, the <code class="language-plaintext highlighter-rouge">Personal Access Token</code> for interacting with the <a href="https://api.hashnode.com/">Hashnodes’ GraphQL API</a>. The API is quite user friendly and provides everything in one place. There are docs for running each and every <code class="language-plaintext highlighter-rouge">query</code> and <code class="language-plaintext highlighter-rouge">mutations</code> present in the API.</p>

<p>You can paste the token when prompted from the script or manually type in the <code class="language-plaintext highlighter-rouge">keys.txt</code> text file as <code class="language-plaintext highlighter-rouge">hashnode:token</code> on the 4th line. Yes, that should be on the <code class="language-plaintext highlighter-rouge">4th</code> line, thats make retrieving much more easier and safe. Next also input in the <code class="language-plaintext highlighter-rouge">username</code> when the script asks for the input or again type in on the <code class="language-plaintext highlighter-rouge">5th</code> line, <code class="language-plaintext highlighter-rouge">hashnode_id:username</code> in the text file <code class="language-plaintext highlighter-rouge">keys.txt</code>. Please enter the credentials from the script prompt so as to avoid errors and misconfigurations when doing manually</p>

<p>This will create the Post on hashnode with the title, subtitle, cover image correctly but will mess up the content. I tried hard but its just not happening. There needs to be some character for newline as the API rejects the <code class="language-plaintext highlighter-rouge">rn</code> characters passed in, so I have substited them with <code class="language-plaintext highlighter-rouge">br</code> and the result is raw markdown. <strong>As the Hashnode API is still under development and they are bringing changes and new features in, the API should improve in its core functionality and make it much easier for creating some common queries</strong>. So, I’ll create issue on GitHub for posting the actual content via the script.</p>

<p>So, this is the demonstration of posting on hashnode.</p>

<p><img src="https://gitlab.com/MR_DESTRUCTIVE/tblog-img/-/raw/main/hashnode.gif" alt="hashnode" /></p>

<h2 id="posting-on-mediumcom">Posting on <strong>medium.com</strong>:</h2>

<p>Medium API is much more versatile and markdown friendly, though it has some limitation on the number of posts you can make in a day. For posting on <code class="language-plaintext highlighter-rouge">Medium.com</code>, we will require the <code class="language-plaintext highlighter-rouge">Integration Token</code> which can be generated on the <a href="https://medium.com/me/settings">settings tab</a>. As similar to <code class="language-plaintext highlighter-rouge">hashnode</code>, you can name the token whatever you like and then get the token. Paste the token when prompted from the script or manually type in the <code class="language-plaintext highlighter-rouge">keys.txt</code> text file as <code class="language-plaintext highlighter-rouge">medium:token</code> on the <code class="language-plaintext highlighter-rouge">2nd</code> line. We also require the Medium_id, but we can get that from the token itself, so inside the script once the token is obtained, the curl command is executed to fetch in the <code class="language-plaintext highlighter-rouge">id</code> and it is stored on the next(<code class="language-plaintext highlighter-rouge">3rd</code>) line in the <code class="language-plaintext highlighter-rouge">keys.txt</code> file for actually posting on <code class="language-plaintext highlighter-rouge">medium.com</code>. So that is all the configuration you need for posting on <code class="language-plaintext highlighter-rouge">medium.com</code>.</p>

<p>There is some documentation on <a href="https://github.com/Medium/medium-api-docs">Medium API</a>, we can even post to a Publication, that shall be created in future. Also the cover images can be posted on medium, it is not currently done but that can again be a #TODO. <strong>The tags are not rendered on Medium yet with the script.</strong> The way we can parse  strings is limited in BASH, so this might still be a doable thing later. Most of the checkboxes are ticked like title, subtitle, cover-image, canonical url, and importantly the content.</p>

<p>Let’s look at post on medium from the script.</p>

<p><img src="https://gitlab.com/MR_DESTRUCTIVE/tblog-img/-/raw/main/medium.gif" alt="medium" /></p>

<h2 id="all-platforms">All platforms:</h2>

<p>Now, once you have configured every thing, you can opt for the <code class="language-plaintext highlighter-rouge">4</code> choice that is post on all platforms(dev.to, hashnode and medium), but as hashnode is not looking a good option right now, so there is the <code class="language-plaintext highlighter-rouge">5</code> option for only <code class="language-plaintext highlighter-rouge">dev.to</code> and <code class="language-plaintext highlighter-rouge">medium</code>.</p>

<p><img src="https://gitlab.com/MR_DESTRUCTIVE/tblog-img/-/raw/main/crossposter.gif" alt="allplatforms" /></p>

<h2 id="why-use-crosspostersh">Why use Crossposter.sh?</h2>

<p>This can be not so big of an issue for most of the people but it was a good side project to work and learn more about how APIs work and get some ideas on the design of the platform. Though it is quite time saving to cross post on 3 different platforms within a minute or two. You can tailor your own script as per your specifications and desire.</p>

<p>So, if you are an author on all of the mentioned platforms, please give it a try. Other Platforms are welcome for contributions. If you found any unexpected things, please hit them in the <code class="language-plaintext highlighter-rouge">issues</code> tab.</p>

<h2 id="script">Script</h2>

<p>The script mostly leverages <code class="language-plaintext highlighter-rouge">curl</code>, <code class="language-plaintext highlighter-rouge">sed</code>, <code class="language-plaintext highlighter-rouge">cat</code> and some other basic utilities in BASH.</p>

<h3 id="using-curl-for-posting-the-article-from-apis">Using <code class="language-plaintext highlighter-rouge">curl</code> for posting the article from APIs</h3>

<p>Curl is a life saver command for this project, without this tool, the project might not be as great and efficient. Let’s see some quick commands used in the script.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="nt">-H</span> <span class="s2">"api-key"</span>: <span class="se">\"</span><span class="s1">'"$key"'</span><span class="se">\"</span> <span class="nt">-d</span> <span class="s1">'{"content":\"'</span><span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="s1">'\"}'</span> <span class="s2">"</span><span class="nv">$url</span><span class="s2">"</span>
</code></pre></div></div>

<p>So, the above command is quite basic, some more additions are also added as per the specifications of the Platform. But, let us understand the structure of the command we are sending to the APIs. The first part is the Header (<code class="language-plaintext highlighter-rouge">-H</code>), in here we specify the content that is going to get parsed and the api-keys to access the API. Next, we have the body or the data (<code class="language-plaintext highlighter-rouge">-d</code>), here we parse in the actual contents, it might be the front matter along with the markdown content. Finally we have the <code class="language-plaintext highlighter-rouge">url</code> where we send the <code class="language-plaintext highlighter-rouge">POST</code> request i.e. the <code class="language-plaintext highlighter-rouge">API endpoint</code>. The is the escape character that is used to preserve the literal value of the next character and in short we can shorten the command to fit in the next line.</p>

<p>The wired <code class="language-plaintext highlighter-rouge">$body</code> is used to parse the value of the variable <code class="language-plaintext highlighter-rouge">body</code> inside of single quotes as in BASH, we can only access the variables’ value in double quotes. We are using single quotes as we have to pass the <code class="language-plaintext highlighter-rouge">json</code> object and which has already double quotes in it.</p>

<h3 id="using-sed-for-editing-text">Using <code class="language-plaintext highlighter-rouge">sed</code> for editing text</h3>

<p>Sed is a super-powerful stream editor, its somewhat similar to Vim without an interface, only commands. We use this tool to manipulate the front-matter for posting on the platforms by parsing them to variables in BASH. We also use to enter the api keys inputted by user from variables into the file at a specific position to retrieve later.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"1a title: </span><span class="nv">$title</span><span class="s2">"</span> file.txt
</code></pre></div></div>

<p>Here, we are appending(<code class="language-plaintext highlighter-rouge">a</code>) to the 1st line, text <code class="language-plaintext highlighter-rouge">title: $title</code>, here <code class="language-plaintext highlighter-rouge">$title</code> is the variable, so we are technically parsing the value of the variable <code class="language-plaintext highlighter-rouge">title</code>. We are editing the file <code class="language-plaintext highlighter-rouge">file.txt</code> in-place <code class="language-plaintext highlighter-rouge">-i</code> i.e. we are editing it live without creating any temp or backup files.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> <span class="s2">"s/dev.to://p' keys.txt"</span>
</code></pre></div></div>

<p>Here we are essentially getting the text after a particular pattern. In this case we are searching in <code class="language-plaintext highlighter-rouge">keys.txt</code> file for the string <code class="language-plaintext highlighter-rouge">dev.to:</code> and anything after that till the end of line is returned, we can further store it in the variable and do all sorts of operation.</p>

<h3 id="using-awk-for-programmatic-editing">Using <code class="language-plaintext highlighter-rouge">awk</code> for programmatic editing</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'{print $0"\r\n"}'</span> temp.txt <span class="o">&gt;</span>file.txt
</code></pre></div></div>

<p>AWK is a command-line utility for manipulating or writing certain operations/patterns programmatically. We use this tool so as to add <code class="language-plaintext highlighter-rouge">4r4n</code> to the end of each line, the APIs can’t parse the file contents directly so we have to add certain characters before the end of line and do further operations.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>temp.md | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\r\n'</span> <span class="o">&gt;</span> temp.txt
</code></pre></div></div>

<p>After we have added the <code class="language-plaintext highlighter-rouge">\r\n</code> characters to the end of the file, we simply can use <code class="language-plaintext highlighter-rouge">cat</code> and <code class="language-plaintext highlighter-rouge">tr</code> to merge all the lines into a single line. This is how we parse the contents to the API more safely and concisely, of course we need to parse them in a variable by reading the file.</p>

<p>OK, I won’t bore anyone with more BASH but that were some of the quite important commands in the script that form the backbone of the cross-posting and handling text with the APIs.</p>

<h2 id="conclusion">Conclusion</h2>

<p>So, we can see <code class="language-plaintext highlighter-rouge">crosspost.sh</code> is a BASH script that cross-posts markdown articles with a bit of inputs to 3 different platforms within a couple of minutes. This article was basically to demonstrate the project and its capabilities also highlighting the issues present. I hope you liked the project, please do try it and comment the feedback please. Thank you for reading, Until next time, Happy Coding :)</p>

:ET