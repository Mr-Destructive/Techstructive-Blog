I"tC<h2 id="introduction">Introduction</h2>

<p>We as programmers always fiddle with commenting out code for code testing, documenting the function of code, and most importantly debugging. So you can’t wait to comment on a large chunk of code manually, as it is quite a tedious thing to do. Let’s do it effectively in Vim.</p>

<p>In this part of the series, I’ll cover how to comment/uncomment chunks/blocks of code effectively in Vim. We will see and use some commands, keybindings for doing so, and also we would add certain components to our vimrc file as well to design some custom key mappings.  Let’s get faster with Vim.</p>

<h2 id="how-to-comment-multiple-lines-effectively">How to comment multiple lines effectively</h2>

<p>To comment on multiple lines of code, we can use the Visual Block mode to select the lines, and then after entering into insert mode, we can comment a single line and it would be reflected on all the selected lines.</p>

<ol>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">CTRL+V</code> and Select the line using j and k</p>
  </li>
  <li>
    <p>After Selecting the lines, Press <code class="language-plaintext highlighter-rouge">Escape</code></p>
  </li>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">Shift + I</code>, to enter insert mode</p>
  </li>
  <li>
    <p>Enter the comment code (<code class="language-plaintext highlighter-rouge">//</code>, <code class="language-plaintext highlighter-rouge">#</code>, or other)</p>
  </li>
</ol>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1633518136135/06dfBTq2T.gif" alt="vimcoment.gif" /></p>

<p>So, using just simple steps you can comment out large chunks of code quite easily and effectively. If you are using some other language that has multiple characters for commenting like <code class="language-plaintext highlighter-rouge">//</code>, <code class="language-plaintext highlighter-rouge">- -</code>, etc, you can type in any number of characters while being in insert mode after selecting the lines.</p>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1633520509953/0q-k2ZHC7.gif" alt="vimcppcom.gif" /></p>

<p>This might look a bit wired on the first try but just try it every day, It is a life-saving and very satisfying experience once applied in a real-world scenario.</p>

<h2 id="how-to-uncomment-multiple-lines-effectively">How to uncomment multiple lines effectively</h2>

<p>Now, as we have seen to comment out a large chunk of code, we can even uncomment the code very easily. It’s even simpler than commenting the code.</p>

<ol>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">CTRL + V</code> to enter Visual Block mode</p>
  </li>
  <li>
    <p>Select the commented characters</p>
  </li>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">d</code> to delete the comments</p>
  </li>
  <li>
    <p>Press <code class="language-plaintext highlighter-rouge">Escape</code></p>
  </li>
</ol>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1633518156818/GJzRPTI3I.gif" alt="vimuncoment.gif" /></p>

<p>We can simply use the CTRL + V to select the comment, and then press d to delete all the comment characters.</p>

<p><strong>We are using the Visual Block mode as we only want the comment to be selected and not the entire code associated with the lines.</strong></p>

<h2 id="using-multiline-comments-for-programming-languages">Using Multiline Comments for Programming languages</h2>

<p>Now you might say, why use multiple single-line comments when we can use multiline comments in almost all programming languages. Well, Of course, you can do that, it’s easier for reading the code if syntax highlighting is accurate and greys out the commented part. We can simply add those characters to the start of the block and at the end of the block.</p>

<p>But in Vim, we can customize that too, just imagine when you just select the chunk/block of code that you need to comment out and then simply press a few keystrokes (just 2) and the multiline comments are automatically (programmatically) added as per the programming language extension of the file.</p>

<p>Isn’t that cool? Well, you just need to copy-paste the below code to your Vimrc file and source it and you are good to go.</p>

<div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span><span class="p">!</span> Comment<span class="p">()</span>
    <span class="k">let</span> ext <span class="p">=</span> <span class="nb">tolower</span><span class="p">(</span><span class="nb">expand</span><span class="p">(</span><span class="s1">'%:e'</span><span class="p">))</span>
    <span class="k">if</span> ext <span class="p">==</span> <span class="s1">'py'</span> 
        <span class="k">let</span> cmt1 <span class="p">=</span> <span class="s2">"'''"</span>
	    <span class="k">let</span> cmt2 <span class="p">=</span> <span class="s2">"'''"</span>   
    <span class="k">elseif</span> ext <span class="p">==</span> <span class="s1">'cpp'</span> <span class="p">||</span> ext <span class="p">==</span><span class="s1">'java'</span> <span class="p">||</span> ext <span class="p">==</span> <span class="s1">'css'</span> <span class="p">||</span> ext <span class="p">==</span> <span class="s1">'js'</span> <span class="p">||</span> ext <span class="p">==</span> <span class="s1">'c'</span> <span class="p">||</span> ext <span class="p">==</span><span class="s1">'cs'</span> <span class="p">||</span> ext <span class="p">==</span> <span class="s1">'rs'</span> <span class="p">||</span> ext <span class="p">==</span> <span class="s1">'go'</span>
	    <span class="k">let</span> cmt1 <span class="p">=</span> <span class="s1">'/*'</span>
	    <span class="k">let</span> cmt2 <span class="p">=</span> <span class="s1">'*/'</span>
    <span class="k">elseif</span> ext <span class="p">==</span> <span class="s1">'sh'</span>
	    <span class="k">let</span> cmt1 <span class="p">=</span> <span class="s2">":'"</span>
	    <span class="k">let</span> cmt2 <span class="p">=</span> <span class="s2">"'"</span>
    <span class="k">elseif</span> ext <span class="p">==</span> <span class="s1">'html'</span>
	    <span class="k">let</span> cmt1 <span class="p">=</span> <span class="s2">"&lt;!--"</span>
	    <span class="k">let</span> cmt2 <span class="p">=</span> <span class="s2">"--&gt;"</span>
    <span class="k">elseif</span> ext <span class="p">==</span> <span class="s1">'hs'</span>
	    <span class="k">let</span> cmt1 <span class="p">=</span> <span class="s2">"{-"</span>
	    <span class="k">let</span> cmt2 <span class="p">=</span> <span class="s2">"-}"</span>
    <span class="k">elseif</span> ext <span class="p">==</span> <span class="s2">"rb"</span>
	    <span class="k">let</span> cmt1 <span class="p">=</span> <span class="s2">"=begin"</span>
	    <span class="k">let</span> cmt2 <span class="p">=</span> <span class="s2">"=end"</span>
    <span class="k">endif</span>
    exe <span class="nb">line</span><span class="p">(</span><span class="s2">"'&lt;"</span><span class="p">).</span><span class="s2">"normal O"</span><span class="p">.</span> cmt1 <span class="p">|</span> exe <span class="nb">line</span><span class="p">(</span><span class="s2">"'&gt;"</span><span class="p">).</span><span class="s2">"normal o"</span><span class="p">.</span> cmt2 
<span class="k">endfunction</span>

<span class="k">function</span><span class="p">!</span> UnComment<span class="p">()</span>
    exe <span class="nb">line</span><span class="p">(</span><span class="s2">"'&lt;"</span><span class="p">).</span><span class="s2">"normal dd"</span> <span class="p">|</span> exe <span class="nb">line</span><span class="p">(</span><span class="s2">"'&gt;"</span><span class="p">).</span><span class="s2">"normal dd"</span>   
<span class="k">endfunction</span>


vnoremap <span class="p">,</span><span class="k">m</span> <span class="p">:&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">call</span> Comment<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
vnoremap <span class="k">m</span><span class="p">,</span> <span class="p">:&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;&lt;</span><span class="k">c</span><span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">call</span> UnComment<span class="p">()&lt;</span>CR<span class="p">&gt;</span>

</code></pre></div></div>
<p>The below screencast is an example of <code class="language-plaintext highlighter-rouge">HTML</code> snippet in a file that is getting commented using mapping with the keys <code class="language-plaintext highlighter-rouge">,m</code> you can put any other keybinding you like. 
<img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1633595891674/hbhrbtRHd.gif" alt="htmcm.gif" /></p>

<hr />
<p>Similarly for the next screencast is of an <code class="language-plaintext highlighter-rouge">Javascript</code> snippet in a file which is getting commented using a mapping with the keys <code class="language-plaintext highlighter-rouge">,m</code> and uncommented using <code class="language-plaintext highlighter-rouge">m,</code> again you can put any other keybinding you like.</p>

<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1633595919104/xGTh5ztWu.gif" alt="jscom.gif" /></p>

<hr />
<p>The following screencast is of a shell script(BASH) snippet.
<img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1633596156121/tbGHQBSSA.gif" alt="shcom.gif" /></p>

<hr />
<h3 id="multiline-comments-in-various-programming-languages">Multiline Comments in various Programming Languages:</h3>

<h4 id="1-c--c--java--javascript--css--c--rust--go--php--swift--dart--kotlin">1. C / C++ / Java / Javascript / CSS / C# / Rust / Go / PHP / Swift / Dart / Kotlin</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/*
*/
</code></pre></div></div>
<h4 id="2-python">2. Python</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'''
'''
</code></pre></div></div>
<p>You can even use <code class="language-plaintext highlighter-rouge">"""</code> double quotes instead of single quotes</p>

<h4 id="3-bash-shell-scripting">3. BASH (Shell Scripting)</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>: '
'
</code></pre></div></div>
<p>You can even use <code class="language-plaintext highlighter-rouge">: "</code> and <code class="language-plaintext highlighter-rouge">"</code> double quotes instead of single quotes</p>

<h4 id="4-haskell">4. Haskell</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{-
-}
</code></pre></div></div>
<h4 id="5-ruby">5. Ruby</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>=begin
=end
</code></pre></div></div>

<h4 id="6-html">6. HTML</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!--
--&gt;
</code></pre></div></div>

<h4 id="7-julia">7. Julia</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#=
=#
</code></pre></div></div>

<h3 id="understanding-the-commands--keymapping">Understanding the Commands / Keymapping</h3>

<p><strong>NOTE : You need to go from the top to bottom while commenting on the block of code, otherwise, it would be a mismatch in commenting for specific language syntax. While uncommenting the order doesn’t matter.</strong></p>

<h4 id="getting-the-extension-filetype">Getting the extension (filetype)</h4>

<p>In Vim, we can get the file extension i.e. we can get the programming language associated with the current file. To do that we can use, <code class="language-plaintext highlighter-rouge">expand('%:e')</code>.</p>

<p>This will give us the file extension of the current file. Just for simplicity, <code class="language-plaintext highlighter-rouge">%</code> means the current file, added to it is <code class="language-plaintext highlighter-rouge">:e</code> for excluding the filename and keeping the extension. We convert the extension into lowercase just for keeping things safe and programmatic and store it in a variable <code class="language-plaintext highlighter-rouge">ext</code>.</p>

<h4 id="checking-for-programming-language">Checking for programming language</h4>
<p>We then can then use an if-else ladder to check for the programming languages and assign two variables <code class="language-plaintext highlighter-rouge">cmt1</code> for the initial characters in the multiline comment and <code class="language-plaintext highlighter-rouge">cmt2</code> for enclosing the comment.</p>

<h4 id="typing-in-the-characters">Typing in the characters</h4>

<p>We can use the function <code class="language-plaintext highlighter-rouge">line("'&lt;")</code> to get the line number of the previous visual selection. Similarly, <code class="language-plaintext highlighter-rouge">line("'&gt;")</code> for the ending line. We are using the <code class="language-plaintext highlighter-rouge">exe</code> command to execute the function <code class="language-plaintext highlighter-rouge">line</code> and so we have to use a concatenation of the commands even to write the raw commands like <code class="language-plaintext highlighter-rouge">i</code> to insert mode, <code class="language-plaintext highlighter-rouge">o</code> to insert mode but a line below the cursor. So, we use <code class="language-plaintext highlighter-rouge">normal</code> command for that. This command indicates the interpreter to execute the following commands from the normal mode.</p>

<p>We have to enclose the <code class="language-plaintext highlighter-rouge">normal</code> command in double-quotes/single quotes. We can simply use the variable again with concatenation.</p>

<div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exe <span class="nb">line</span><span class="p">(</span><span class="s2">"'&gt;"</span><span class="p">).</span><span class="s2">"normal o"</span><span class="p">.</span> cmt2 
</code></pre></div></div>

<p>The above command will fetch the last line’s number of the previous visual selection followed by entering <code class="language-plaintext highlighter-rouge">o</code> from the normal mode and concatenated with the value of the variable <code class="language-plaintext highlighter-rouge">cmt2</code> which we have already initialized in the <code class="language-plaintext highlighter-rouge">Comment</code> function. We are using <code class="language-plaintext highlighter-rouge">|</code> for running multiple commands as we also need to include the comment at the beginning of the visual selection.</p>

<p>For uncommenting the code, we are simply deleting the entire first and the last line in the visual selection. For that, we have used <code class="language-plaintext highlighter-rouge">dd</code> from the normal mode.</p>

<h3 id="conclusion">Conclusion</h3>

<p>So, from the following type of tutorial, we were able to set up our Vim editor for efficient code commenting/ uncommenting using some commands, key shortcuts, and configuring the vimrc for making custom keymappings. We were also able to understand the multiline comments in various programming languages and use them in Vim very effectively with a simple addon to the config vimrc file.</p>

<p>Thank you for reading, hope you found this article helpful. If you have any queries or wanna add multiline comments for some more programming languages please let me know in the comments or contact section.</p>

<p>Happy Coding :)</p>

<h3 id="references">References</h3>

<ul>
  <li>
    <p><a href="https://stackoverflow.com/questions/1676632/whats-a-quick-way-to-comment-uncomment-lines-in-vim/1676690">StackOverflow - Commenting lines in Vim </a></p>
  </li>
  <li>
    <p><a href="https://dev.to/grepliz/3-ways-to-comment-out-blocks-of-code-in-vi-6j4">Liz Lam - 3 ways to comment code in Vim</a></p>
  </li>
  <li>
    <p><a href="https://vi.stackexchange.com/questions/9644/how-to-use-a-variable-in-the-expression-of-a-normal-command">StackExchange - Use variable in normal command</a></p>
  </li>
</ul>
:ET