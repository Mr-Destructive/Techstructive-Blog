<!DOCTYPE html>
<html lang="en">
 <head>
  <title>
   Python: Search and Replace in File
  </title>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <meta content="" name="description"/>
  <meta content="https://mr-destructive.github.io/techstructive-blog/" property="og:url"/>
  <meta content="website" property="og:type"/>
  <meta content="Techstructive Blog" property="og:title"/>
  <meta content="" property="og:description"/>
  <meta content="https://res.cloudinary.com/techstructive-blog/image/upload/v1646235547/blog-media/a9aafsuwsg1mbt571mmi.png" property="og:image"/>
  <meta content="mr-destructive.github.io" property="twitter:domain"/>
  <meta content="https://mr-destructive.github.io/techstructive-blog/" property="twitter:url"/>
  <meta content="Techstructive Blog" name="twitter:title"/>
  <meta content="" name="twitter:description"/>
  <meta content="https://res.cloudinary.com/techstructive-blog/image/upload/v1646235547/blog-media/a9aafsuwsg1mbt571mmi.png" name="twitter:image"/>
  <link href="../tbicon.png" rel="icon" type="image/png"/>
  <link href="../main.css" rel="stylesheet"/>
  <meta content="markata 0.2.0" name="generator"/>
 </head>
 <body>
  <nav>
   <a href="/techstructive-blog/">
    <h1 id="blog-title">
     Techstructive Blog
    </h1>
   </a>
   <div id="shift">
    This website is now live at
    <a href="https://meetgor.com">
     meetgor.com
    </a>
   </div>
   <ul class="navbar">
    <li>
     <a class="navlink" href="/techstructive-blog">
      Home
     </a>
    </li>
    <li>
     <a class="navlink" href="/techstructive-blog/archive/">
      Archive
     </a>
    </li>
    <li>
     <a class="navlink" href="/techstructive-blog/series/">
      Series
     </a>
    </li>
    <li>
     <a class="navlink" href="/techstructive-blog/projects/">
      Projects
     </a>
    </li>
    <li>
     <a class="navlink" href="/techstructive-blog/tils/">
      Tils
     </a>
    </li>
   </ul>
  </nav>
  <hr/>
  <article class="blog-post h-entry">
   <div id="title-wrapper">
    <a class="u-url" href="/techstructive-blog/python-search-replace-file/">
     <h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">
      Python: Search and Replace in File
     </h1>
    </a>
    <a href="/techstructive-blog/python">
     #python
    </a>
    <p>
     <time class="dt-published post-date" datetime="2022-03-28" style="text-align:right;z-index:2">
      2022-03-28
     </time>
    </p>
    <div class="h-card p-author" rel="author">
     <div class="content">
      <a class="p-name u-url" href="/techstructive-blog/">
       <p>
        <span class="p-given-name">
         Meet
        </span>
        <span class="p-family-name">
         Gor
        </span>
       </p>
      </a>
      <p class="p-note">
       Techstructive Blog
       <a href="https://twitter.com/MeetGor21">
        @MeetGor21
       </a>
      </p>
      <p>
       <a alt="edit post url" href="https://github.com/mr-destructive/techstructive-blog/edit/gh-pages/blog/tils/2022-03-28-Python-search-replace-in-file.md" title="edit this post">
        edit
        <span aria-label="" role="img">
         ✏️
        </span>
       </a>
      </p>
      <p>
      </p>
     </div>
    </div>
   </div>
   <div id="post-body">
    <h2 id="searching-and-replacing-the-text-in-a-file">
     Searching and Replacing the text in a File
    </h2>
    <p>
     Using simple python semantics, we can perform search and replace in a file. Firstly, we will define the file name, along with the words to search and replace. After defining the sets of variables, we will open the file in
     <code>
      r+
     </code>
     mode i.e. we can perform read as well as write operations in the file.
    </p>
    <p>
     We will store the entire file contents using the
     <a href="https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files">
      read
     </a>
     function, the contents of file are now stored in the form of a string. We further can set the position of the cursor or the current position in the file using the
     <a href="https://python-reference.readthedocs.io/en/latest/docs/file/seek.html">
      seek
     </a>
     function. The seek function takes in a optional parameter as the position to set for reading/writing of file. Using the
     <a href="https://python-reference.readthedocs.io/en/latest/docs/file/truncate.html">
      truncate
     </a>
     function, we can clear all the contents of the file.
    </p>
    <p>
     Finally, we generate the content by replacing the words i.e. the old word with the new word from the string which we store the contents. After replacing the content in the string, we write the string variable into the file and hence the substitution was performed in the text file.
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="n">file_name</span> <span class="o">=</span> <span class="s1">'temp.txt'</span>
<span class="n">old_text</span> <span class="o">=</span> <span class="s1">'foo'</span>
<span class="n">new_text</span> <span class="o">=</span> <span class="s1">'python'</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">"r+"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fname</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">fname</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">fname</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fname</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">old_text</span><span class="p">,</span> <span class="n">new_text</span><span class="p">)</span>
    <span class="n">fname</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span>
</code></pre>
    </div>
    <p>
     <img alt="Python Search Replace in File" src="https://res.cloudinary.com/techstructive-blog/image/upload/v1648479344/blog-media/cstvfdlazyfriwvnilju.png"/>
    </p>
   </div>
   <hr/>
   <div id="show">
   </div>
  </article>
  <hr/>
  <footer>
   <ul class="social">
    <li>
     <a href="https://twitter.com/MeetGor21">
      Twitter
      <svg class="svg-icon grey">
       <use xlink:href="../social-icons.svg#twitter">
       </use>
      </svg>
     </a>
    </li>
    <li>
     <a href="https://www.linkedin.com/in/meetgor/">
      LinkedIn
      <svg class="svg-icon grey">
       <use xlink:href="../social-icons.svg#linkedin">
       </use>
      </svg>
     </a>
    </li>
    <li>
     <a href="https://github.com/Mr-Destructive">
      GitHub
      <svg class="svg-icon grey">
       <use xlink:href="../social-icons.svg#github">
       </use>
      </svg>
     </a>
    </li>
    <li>
     <a href="https://dev.to/mr-destructive">
      Dev.to
      <svg class="svg-icon grey">
       <use xlink:href="../social-icons.svg#devto">
       </use>
      </svg>
     </a>
    </li>
    <li>
     <a href="/techstructive-blog/rss.xml">
      RSS
      <svg class="svg-icon orange">
       <use xlink:href="../social-icons.svg#rss">
       </use>
      </svg>
     </a>
    </li>
    <li>
     <a class="u-email" href="mailto:gormeet711@gmail.com">
      Email
     </a>
    </li>
   </ul>
   Techstructive Blog © 2022
  </footer>
 </body>
</html>
