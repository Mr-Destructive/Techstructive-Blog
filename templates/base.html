<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Techstructive Blog</title>

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  {% load static %}
    <script src="https://unpkg.com/htmx.org@1.1.0"></script>
<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    <header class="site-header">
      <nav>
        <h1>Techstructive Blog</h1>
              {% if user.is_authenticated %}
                <a class="nav-item nav-link" href="{% url 'home' %}">Home</a>
                <a class="nav-item nav-link" href="{% url 'account_logout' %}">Logout</a>
              {% else %}
                <a class="nav-item nav-link" href="{% url 'user:redirect' %}">Register</a>
                <a class="nav-item nav-link" href="{% url 'account_login' %}">Login</a>
              {% endif %}
      </nav>
    </header>
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
    {% block body %}
      {% if user.is_authenticated %}
      <a href="{% url 'articles:article-create' %}"><button>Create</button></a>
        <ul id="article-list">
          {% for article in articles %}
            <li>
              <a href="{% url 'articles:article-detail' article.id %}">
                {{ article.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endblock %}
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
      })
    </script>
</body>
</html>

